var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativePagerView=_interopRequireDefault(require("react-native-pager-view"));var _reactNativeReanimated=_interopRequireDefault(require("react-native-reanimated"));var _jsxFileName="/home/ilyes/shotgun/react-native-tab-view-viewpager-adapter/src/index.tsx";var AnimatedViewPager=_reactNativeReanimated.default.createAnimatedComponent(_reactNativePagerView.default);var event=_reactNativeReanimated.default.event,add=_reactNativeReanimated.default.add;var ViewPagerBackend=function(_React$Component){(0,_inherits2.default)(ViewPagerBackend,_React$Component);function ViewPagerBackend(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,ViewPagerBackend);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(ViewPagerBackend)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.enterListeners=[];_this.jumpToIndex=function(index){_this.ref.current.getNode().setPage(index);};_this.jumpTo=function(key){var _this$props=_this.props,navigationState=_this$props.navigationState,keyboardDismissMode=_this$props.keyboardDismissMode,onIndexChange=_this$props.onIndexChange;var index=navigationState.routes.findIndex(function(route){return route.key===key;});if(navigationState.index!==index){onIndexChange(index);_this.jumpToIndex(index);if(keyboardDismissMode==='auto'){_reactNative.Keyboard.dismiss();}}};_this.addListener=function(type,listener){switch(type){case'enter':_this.enterListeners.push(listener);break;}};_this.removeListener=function(type,listener){switch(type){case'enter':{var _index=_this.enterListeners.indexOf(listener);if(_index>-1){_this.enterListeners.splice(_index,1);}break;}}};_this.currentIndex=new _reactNativeReanimated.default.Value(_this.props.navigationState.index);_this.offset=new _reactNativeReanimated.default.Value(0);_this.justScrolled=false;_this.onPageScroll=event([{nativeEvent:{position:_this.currentIndex,offset:_this.offset}}]);_this.onPageScrollStateChanged=function(state){switch(state){case'Settling':_this.props.onSwipeEnd&&_this.props.onSwipeEnd();return;case'Dragging':_this.props.onSwipeStart&&_this.props.onSwipeStart();return;}};_this.ref=React.createRef();return _this;}(0,_createClass2.default)(ViewPagerBackend,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.navigationState.index!==this.props.navigationState.index&&!this.justScrolled){this.jumpToIndex(this.props.navigationState.index);}this.justScrolled=false;}},{key:"onIndexChange",value:function onIndexChange(newPosition){if(newPosition!==this.props.navigationState.index){this.justScrolled=true;}this.props.onIndexChange(newPosition);}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,style=_this$props2.style,keyboardDismissMode=_this$props2.keyboardDismissMode,swipeEnabled=_this$props2.swipeEnabled,children=_this$props2.children,orientation=_this$props2.orientation,transition=_this$props2.transition,showPageIndicator=_this$props2.showPageIndicator,pageMargin=_this$props2.pageMargin,overdrag=_this$props2.overdrag,overScrollMode=_this$props2.overScrollMode;return children({position:add(this.currentIndex,this.offset),addListener:this.addListener,removeListener:this.removeListener,jumpTo:this.jumpTo,render:function render(children){return React.createElement(AnimatedViewPager,{ref:_this2.ref,lazy:false,style:[{flex:1},style],initialPage:_this2.props.navigationState.index,keyboardDismissMode:keyboardDismissMode==='auto'?'on-drag':keyboardDismissMode,onPageScroll:_this2.onPageScroll,onPageSelected:function onPageSelected(e){return _this2.onIndexChange(e.nativeEvent.position);},onPageScrollStateChanged:_this2.onPageScrollStateChanged,scrollEnabled:swipeEnabled,orientation:orientation,transitionStyle:transition,showPageIndicator:showPageIndicator,pageMargin:pageMargin,overdrag:overdrag,overScrollMode:overScrollMode,__source:{fileName:_jsxFileName,lineNumber:166}},children);}});}}]);return ViewPagerBackend;}(React.Component);exports.default=ViewPagerBackend;ViewPagerBackend.defaultProps={onIndexChange:function onIndexChange(){},swipeEnabled:true};
//# sourceMappingURL=index.js.map